#include <sampgdk/core.h>

#include <Area/CArea.h>
#include <MCore/MCore.h>


//Streamer::CreatePolygon(float points[], int maxpoints, float minz, float maxz, 
						//int worldid, int interiorid, int playerid)

void CAreaHandler::Load()
{
	sampgdk_logprintf("[AREA] Loading areas...");

	//Ocean Docks
	InsertArea("Ocean Docks", "Marine St", Streamer::CreatePolygon(
		{ 	2807.7919f, -2696.4877f, 2808.10521f, -2334.30852f, 2958.21823f, -2060.0f, 2622.0219f, -2060.0f, 2317.46232f, -2060.0f, 2141.04975f, -2234.1587f,
			2108.94574f, -2265.85254f, 2109.99738f, -2310.08768f, 2154.73615f, -2328.12059f, 2205.67086f, -2374.50756f, 2183.05211f, -2426.82668f,
			2181.66655f, -2596.3272f, 2165.50165f, -2636.04667f, 2122.5492f, -2683.61766f, 2061.56196f, -2694.68651f, 2060.22099f, -2705.01f, 2369.30073f, -2705.0f,
			2369.05863f, -2721.78067f, 2529.65739f, -2721.78f, 2530.81731f, -2705.0f, 2807.7919f, -2696.4877f }));

	//playa del Seville
	InsertArea("Playa del Seville", "Seville St", Streamer::CreatePolygon(
		{ 	2958.21823f, -2060.0f, 2958.56036f, -1899.96593f, 2622.3462f, -1900.71941f, 2622.0219f, -2060.0f, 2958.21823f, -2060.0f }));

	//willowfield
	InsertArea("Willowfield", "Avalon St", Streamer::CreatePolygon(
		{	2622.0219f, -2060.0f, 2622.3462f, -1900.71941f, 2622.41536f, -1881.06374f, 2539.15422f, -1880.29987f, 2404.33048f, -1881.06375f,
			2347.10614f, -1880.49981f, 2321.83211f, -1874.95276f, 2222.91044f, -1865.02239f, 2191.6939f, -1865.02239f, 2090.37832f, -1865.02239f,
			1990.23751f, -1863.74489f, 1970.83206f, -1855.09203f, 1969.80872f, -2178.41173f, 2060.30362f, -2178.239f, 2080.13099f, -2185.8867f,
			2100.33296f, -2198.12376f, 2126.85135f, -2221.11946f, 2141.04975f, -2234.1587f, 2317.46232f, -2060.0f, 2622.0219f, -2060.0f}));

	//los santos international
	InsertArea("Los Santos International", "World Way", Streamer::CreatePolygon(
		{	1430.30458f, -2693.56537f, 2061.56196f, -2694.68651f, 2122.5492f, -2683.61766f, 2165.50165f, -2636.04667f, 2181.66655f, -2596.3272f,
			2183.05211f, -2426.82668f, 2205.67086f, -2374.50756f, 2154.73615f, -2328.12059f, 2109.99738f, -2310.08768f, 2108.94574f, -2265.85254f, 2141.04975f, -2234.1587f,
			2126.85135f, -2221.11946f, 2100.33296f, -2198.12376f, 2080.13099f, -2185.8867f, 2060.30362f, -2178.239f, 1969.80872f, -2178.41173f, 1691.59584f, -2178.96918f,
			1289.77621f, -2179.05427f, 1265.92636f, -2193.30619f, 1250.64735f, -2213.82372f, 1250.64735f, -2243.50867f, 1259.07713f, -2261.05864f, 1278.42176f, -2275.35684f,
			1299.49786f, -2277.33238f, 1320.10058f, -2270.228f, 1320.81102f, -2302.19773f, 1299.85308f, -2295.44857f, 1270.36988f, -2303.61861f, 1251.89847f, -2322.80045f,
			1252.60891f, -2360.80892f, 1277.11904f, -2383.89817f, 1299.85308f, -2389.22646f, 1325.4057f, -2389.36356f, 1325.4057f, -2514.36284f, 1325.4057f, -2593.37792f,
			1337.71133f, -2628.99947f, 1359.73193f, -2660.73504f, 1391.4675f, -2682.10797f, 1413.48809f, -2689.87995f, 1430.30458f, -2693.56537f}));

	//east beach
	InsertArea("East Beach", "Saints St", Streamer::CreatePolygon(
		{	2958.56036f, -1899.96593f, 2622.3462f, -1900.71941f, 2622.41536f, -1881.06374f, 2623.29796f, -1630.23384f, 2631.22479f, -1454.11913f, 
			2633.89519f, -1394.78947f, 2747.27174f, -1392.56658f, 2748.25562f, -1160.44886f, 2748.33618f, -1141.44361f, 2826.39492f, -1132.12978f, 2958.11905f, -1132.5733f,
			2958.56036f, -1899.96593f}));

	//las colinas
	InsertArea("Las Colinas", "Salvatore St", Streamer::CreatePolygon(
		{	2958.1593f, -945.87446f, 2631.67256f, -936.80538f, 2433.54813f, -935.41014f, 2086.83038f, -933.31727f, 2028.23019f, -934.01489f, 
			1984.28005f, -964.71023f, 1980.96292f, -1016.19171f, 1968.26678f, -1059.9934f, 2055.67797f, -1097.03259f, 2126.26734f, -1124.97422f, 2279.81979f, -1155.61885f, 
			2310.78436f, -1159.98565f, 2381.05012f, -1159.58867f, 2581.00334f, -1160.47292f, 2748.25562f, -1160.44886f, 2748.33618f, -1141.44361f, 2826.39492f, -1132.12978f,
			2958.11905f, -1132.5733f, 2958.1593f, -945.87446f}));

	//los flores
	InsertArea("Los Flores", "Las Tunas St", Streamer::CreatePolygon(
		{	2748.25562f, -1160.44886f, 2581.00334f, -1160.47292f, 2582.01758f, -1454.09557f, 2631.22479f, -1454.11913f, 2633.89519f, -1394.78947f,
			2747.27174f, -1392.56658f, 2748.25562f, -1160.44886f}));

	//east los santos
	InsertArea("East Los Santos", "Princeton St", Streamer::CreatePolygon(
		{	2581.00334f, -1160.47292f, 2381.05012f, -1159.58867f, 2310.78436f, -1159.98565f, 2279.81979f, -1155.61885f, 2280.67474f, -1369.51388f,
			2277.94788f, -1434.27678f, 2265.67701f, -1492.90424f, 2222.72899f, -1494.26767f, 2223.15302f, -1534.11763f, 2222.7311f, -1596.46166f, 2293.71435f, -1628.63689f,
			2623.29796f, -1630.23384f, 2631.22479f, -1454.11913f, 2582.01758f, -1454.09557f, 2581.00334f, -1160.47292f}));

	//ganton
	InsertArea("Ganton", "Greenleaf St", Streamer::CreatePolygon(
		{	2623.29796f, -1630.23384f, 2293.71435f, -1628.63689f, 2222.7311f, -1596.46166f, 2204.39283f, -1651.34068f, 2194.97105f, -1692.71461f, 
			2192.92283f, -1783.24568f, 2191.6939f, -1865.02239f, 2222.91044f, -1865.02239f, 2321.83211f, -1874.95276f, 2347.10614f, -1880.49981f, 2404.33048f, -1881.06375f,
			2539.15422f, -1880.29987f, 2622.41536f, -1881.06374f, 2623.29796f, -1630.23384f}));

	//idlewood
	InsertArea("Idlewood", "Century St", Streamer::CreatePolygon(
		{	2223.15302f, -1534.11763f, 2128.89941f, -1500.00129f, 2102.87847f, -1495.95359f, 2067.0274f, -1483.23224f, 2025.3939f, -1479.18454f, 
			1993.17548f, -1479.0675f, 1836.74126f, -1478.49921f, 1836.52899f, -1501.01374f, 1813.19216f, -1570.0717f, 1813.11965f, -1602.57356f, 1812.62288f, -1825.23276f, 
			1950.99389f, -1854.19414f, 1970.83206f, -1855.09203f, 1990.23751f, -1863.74489f, 2090.37832f, -1865.02239f, 2191.6939f, -1865.02239f, 2192.92283f, -1783.24568f, 
			2194.97105f, -1692.71461f, 2204.39283f, -1651.34068f, 2222.7311f, -1596.46166f, 2223.15302f, -1534.11763f}));

	//Jefferson
	InsertArea("Jefferson", "Arlington St", Streamer::CreatePolygon(
		{	2223.15302f, -1534.11763f, 2128.89941f, -1500.00129f, 2102.87847f, -1495.95359f, 2067.0274f, -1483.23224f, 2025.3939f, -1479.18454f, 
			1993.17548f, -1479.0675f, 1996.8535f, -1349.97782f, 2054.20736f, -1348.5072f, 2055.67797f, -1097.03259f, 2126.26734f, -1124.97422f, 2279.81979f, -1155.61885f,
			2280.67474f, -1369.51388f, 2277.94788f, -1434.27678f, 2265.67701f, -1492.90424f, 2222.72899f, -1494.26767f, 2223.15302f, -1534.11763f}));

	//glen park
	InsertArea("Glen Park", "Gage St", Streamer::CreatePolygon(
		{	1993.17548f, -1479.0675f, 1996.8535f, -1349.97782f, 2054.20736f, -1348.5072f, 2055.67797f, -1097.03259f, 1968.26678f, -1059.9934f, 
			1980.96292f, -1016.19171f, 1889.55071f, -1007.93922f, 1879.09111f, -1035.69812f, 1864.43467f, -1046.69045f, 1858.67679f, -1070.76889f, 1858.26887f, -1172.59f,
			1836.74126f, -1172.84052f, 1836.74126f, -1452.99997f, 1836.74126f, -1478.49921f, 1993.17548f, -1479.0675f}));

	//el corona
	InsertArea("El Corona", "Cesar-Chavez St", Streamer::CreatePolygon(
		{	1569.32584f, -2131.75412f, 1639.9024f, -2088.49752f, 1675.87368f, -2014.73363f, 1679.88325f, -1972.05084f, 1813.02512f, -1971.6486f,
			1812.66282f, -1839.77147f, 1812.62288f, -1825.23276f, 1950.99389f, -1854.19414f, 1970.83206f, -1855.09203f, 1969.80872f, -2178.41173f,
			1691.59584f, -2178.96918f, 1628.06375f, -2168.63606f, 1569.32584f, -2131.75412f}));

	//unity station
	InsertArea("Unity Station", "Alameda St", Streamer::CreatePolygon(
		{	1679.88325f, -1972.05084f, 1813.02512f, -1971.6486f, 1812.66282f, -1839.77147f, 1789.0712f, -1839.17151f, 1716.23739f, -1819.30775f,
			1698.86448f, -1820.80753f, 1698.78136f, -1840.97731f, 1699.13012f, -1854.94633f, 1689.03524f, -1864.50991f, 1679.88325f, -1972.05084f}));

	//verdant bluffs
	InsertArea("Verdant Bluffs", "Vermont St", Streamer::CreatePolygon(
		{	1325.4057f, -2514.36284f, 1325.4057f, -2389.36356f, 1299.85308f, -2389.22646f, 1277.11904f, -2383.89817f, 1252.60891f, -2360.80892f,
			1251.89847f, -2322.80045f, 1270.36988f, -2303.61861f, 1299.85308f, -2295.44857f, 1320.81102f, -2302.19773f, 1320.10058f, -2270.228f, 1299.49786f, -2277.33238f, 
			1278.42176f, -2275.35684f, 1259.07713f, -2261.05864f, 1250.64735f, -2243.50867f, 1250.64735f, -2213.82372f, 1265.92636f, -2193.30619f, 1289.77621f, -2179.05427f, 
			1691.59584f, -2178.96918f, 1628.06375f, -2168.63606f, 1569.32584f, -2131.75412f, 1639.9024f, -2088.49752f, 1675.87368f, -2014.73363f, 1679.88325f, -1972.05084f, 
			1689.03524f, -1864.50991f, 1659.60845f, -1862.48122f, 1373.26153f, -1863.19f, 1337.82255f, -1845.47052f, 1322.93818f, -1841.92662f, 1070.30123f, -1842.99548f, 
			1040.62967f, -1843.12102f, 1043.58459f, -1931.76844f, 1031.76493f, -2048.48754f, 1011.08053f, -2044.79389f, 978.57648f, -2109.802f, 957.15335f, -2145.26097f, 
			954.93717f, -2171.11646f, 1001.47706f, -2260.50261f, 994.53301f, -2323.95938f, 1188.37537f, -2473.25641f, 1325.4057f, -2514.36284f}));

	//little mexico
	InsertArea("Little Mexico", "La Verne St", Streamer::CreatePolygon(
		{	1757.55027f, -1593.75497f, 1757.15627f, -1724.01485f, 1699.26737f, -1723.05486f, 1698.86448f, -1820.80753f, 1716.23739f, -1819.30775f,
			1789.0712f, -1839.17151f, 1812.66282f, -1839.77147f, 1812.62288f, -1825.23276f, 1813.11965f, -1602.57356f, 1757.55027f, -1593.75497f}));

	//Pershing Square
	//float points17[10] = {	1583.57f, -1722.33f, 1441.32f, -1722.33f, 1441.91f, -1578.3f, 1584.16f, -1577.7f, 
	//						1583.57f, -1722.33f};
	//InsertArea("Pershing Square", "Spring St", Streamer::CreatePolygon(points17, 10));

	//Commerce
	InsertArea("Commerce", "Hope St", Streamer::CreatePolygon(
		{	1365.07835f, -1386.63243f, 1364.04739f, -1410.98867f, 1361.21228f, -1460.60324f, 1342.07523f, -1507.38269f, 1329.3172f, -1525.10218f,
			1320.81184f, -1560.54115f, 1320.92822f, -1575.94142f, 1322.02296f, -1720.81245f, 1322.93818f, -1841.92662f, 1337.82255f, -1845.47052f, 1373.26153f, -1863.19f,
			1659.60845f, -1862.48122f, 1689.03524f, -1864.50991f, 1699.13012f, -1854.94633f, 1698.78136f, -1840.97731f, 1698.86448f, -1820.80753f, 1699.26737f, -1723.05486f,
			1757.15627f, -1724.01485f, 1757.55027f, -1593.75497f, 1813.11965f, -1602.57356f, 1813.19216f, -1570.0717f, 1836.52899f, -1501.01374f, 1836.74126f, -1478.49921f,
			1836.74126f, -1452.99997f, 1810.32075f, -1452.99997f, 1770.88683f, -1432.96084f, 1429.25511f, -1430.8345f, 1426.29112f, -1388.56547f, 1365.07835f, -1386.63243f}));

	//Downtown Los Santos
	InsertArea("Downtown Los Santos", "Grand St", Streamer::CreatePolygon(
		{	1388.91911f, -950.41086f, 1455.97456f, -968.88918f, 1502.7392f, -996.33799f, 1559.16174f, -1051.2356f, 1588.13549f, -1117.82438f, 
			1603.89313f, -1168.6555f, 1659.80737f, -1170.68875f, 1692.8476f, -1121.89087f, 1738.0873f, -1075.63454f, 1808.23425f, -1042.086f, 1879.09111f, -1035.69812f,
			1864.43467f, -1046.69045f, 1858.67679f, -1070.76889f, 1858.26887f, -1172.59f, 1836.74126f, -1172.84052f, 1836.74126f, -1452.99997f, 1810.32075f, -1452.99997f, 
			1770.88683f, -1432.96084f, 1429.25511f, -1430.8345f, 1426.29112f, -1388.56547f, 1365.07835f, -1386.63243f, 1363.31091f, -1132.84348f, 1374.74352f, -1063.81558f,
			1376.67656f, -1022.5775f, 1388.91911f, -950.41086f}));

	//Mulholland Intersection
	InsertArea("Mulholland Intersection", "Harbor St", Streamer::CreatePolygon(
		{	1455.97456f, -968.88918f, 1502.7392f, -996.33799f, 1559.16174f, -1051.2356f, 1588.13549f, -1117.82438f, 1603.89313f, -1168.6555f, 
			1659.80737f, -1170.68875f, 1692.8476f, -1121.89087f, 1738.0873f, -1075.63454f, 1808.23425f, -1042.086f, 1879.09111f, -1035.69812f, 1889.55071f, -1007.93922f,
			1814.33399f, -970.92243f, 1757.40313f, -910.9417f, 1725.37952f, -844.35293f, 1710.13018f, -765.05638f, 1675.56502f, -761.4982f, 1638.96661f, -825.54541f,
			1593.72691f, -881.45965f, 1510.87218f, -925.17442f, 1461.05767f, -936.86557f, 1455.97456f, -968.88918f}));

	//market
	InsertArea("Market", "Market Drive", Streamer::CreatePolygon(
		{	647.54889f, -1413.21834f, 788.36712f, -1411.75831f, 866.87125f, -1410.94436f, 868.05466f, -1312.7215f, 952.07663f, -1311.53809f, 953.26004f, -1131.06837f,
			1363.31091f, -1132.84348f, 1365.07835f, -1386.63243f, 1364.04739f, -1410.98867f, 1361.21228f, -1460.60324f, 1342.07523f, -1507.38269f, 1329.3172f, -1525.10218f,
			1320.81184f, -1560.54115f, 1320.92822f, -1575.94142f, 884.67434f, -1581.04411f, 819.5688f, -1644.80559f, 820.61684f, -1760.84187f, 752.2955f, -1755.98356f,
			645.91457f, -1724.44556f, 647.54889f, -1413.21834f}));

	//conference center
	InsertArea("Conference Center", "Venice St", Streamer::CreatePolygon(
		{	1047.7298f, -1721.53386f, 1322.02296f, -1720.81245f, 1322.93818f, -1841.92662f, 1070.30123f, -1842.99548f, 1048.45772f, -1800.14988f,
			1047.7298f, -1721.53386f}));

	//verona beach
	InsertArea("Verona Beach", "Ocean Walk", Streamer::CreatePolygon(
		{	645.91457f, -2169.93636f, 645.91457f, -1724.44556f, 752.2955f, -1755.98356f, 820.61684f, -1760.84187f, 819.5688f, -1644.80559f, 
			884.67434f, -1581.04411f, 1320.92822f, -1575.94142f, 1322.02296f, -1720.81245f, 1047.7298f, -1721.53386f, 1048.45772f, -1800.14988f, 1070.30123f, -1842.99548f,
			1040.62967f, -1843.12102f, 1043.58459f, -1931.76844f, 1031.76493f, -2048.48754f, 1011.08053f, -2044.79389f, 978.57648f, -2109.802f, 957.15335f, -2145.26097f,
			954.93717f, -2171.11646f, 645.91457f, -2169.93636f}));

	//temple
	InsertArea("Temple", "Temple Drive", Streamer::CreatePolygon(
		{	953.26004f, -1131.06837f, 951.51623f, -982.22448f, 951.17625f, -955.72368f, 1094.17719f, -939.57075f, 1151.18754f, -935.77006f, 1234.32762f, -921.99256f,
			1307.49089f, -912.49084f, 1355.94968f, -925.31817f, 1390.15589f, -928.64377f, 1388.91911f, -950.41086f, 1376.67656f, -1022.5775f, 1374.74352f, -1063.81558f,
			1363.31091f, -1132.84348f, 953.26004f, -1131.06837f}));

	//mulholland
	InsertArea("Mulholland", "Sunset St", Streamer::CreatePolygon(
		{	674.62103f, -676.09515f, 737.61516f, -673.99534f, 860.4537f, -637.24877f, 937.15038f, -536.89686f, 1111.38031f, -500.76149f, 1207.9713f, -570.05503f,
			1198.52218f, -608.90141f, 1230.01925f, -609.95131f, 1297.62847f, -360.82518f, 1395.90378f, -308.62941f, 1632.13176f, -304.4298f, 1689.87637f, -608.90141f,
			1675.56502f, -761.4982f, 1638.96661f, -825.54541f, 1593.72691f, -881.45965f, 1510.87218f, -925.17442f, 1461.05767f, -936.86557f, 1455.97456f, -968.88918f,
			1388.91911f, -950.41086f, 1390.15589f, -928.64377f, 1355.94968f, -925.31817f, 1307.49089f, -912.49084f, 1234.32762f, -921.99256f, 1151.18754f, -935.77006f,
			1094.17719f, -939.57075f, 951.17625f, -955.72368f, 951.51623f, -982.22448f, 877.24977f, -1007.9546f, 832.92323f, -1055.2612f, 788.36392f, -1062.3387f,
			784.86075f, -937.52077f, 760.713f, -913.37302f, 689.31966f, -858.77811f, 678.82064f, -833.58046f, 674.62103f, -676.09515f}));

	//vinewood
	InsertArea("Vinewood", "Vinewood Blvd", Streamer::CreatePolygon(
		{	637.03794f, -1221.66672f, 680.18048f, -1192.15882f, 753.79333f, -1074.65579f, 788.36392f, -1062.3387f, 832.92323f, -1055.2612f, 877.24977f, -1007.9546f,
			951.51623f, -982.22448f, 953.26004f, -1131.06837f, 952.07663f, -1311.53809f, 868.05466f, -1312.7215f, 788.94869f, -1312.62254f, 788.36712f, -1411.75831f,
			647.54889f, -1413.21834f, 643.92441f, -1274.61214f, 637.03794f, -1221.66672f}));

	//market station
	InsertArea("Market Station", "Ferguson St", Streamer::CreatePolygon(
		{	788.36712f, -1411.75831f, 788.94869f, -1312.62254f, 868.05466f, -1312.7215f, 866.87125f, -1410.94436f, 788.36712f, -1411.75831f}));

	//richman
	InsertArea("Richman", "Montana St", Streamer::CreatePolygon(
		{	347.05157f, -675.04524f, 674.62103f, -676.09515f, 678.82064f, -833.58046f, 689.31966f, -858.77811f, 760.713f, -913.37302f, 784.86075f, -937.52077f,
			788.36392f, -1062.3387f, 753.79333f, -1074.65579f, 680.18048f, -1192.15882f, 637.03794f, -1221.66672f, 553.88229f, -1259.84072f, 376.44883f, -1383.72917f,
			241.01146f, -1456.17241f, 168.11937f, -1562.92723f, 140.1531f, -1585.04009f, 72.41415f, -1557.90469f, 73.02712f, -1139.10198f, 347.05157f, -675.04524f}));

	//rodeo
	InsertArea("Rodeo", "Rodeo Drive", Streamer::CreatePolygon(
		{	168.11937f, -1562.92723f, 241.01146f, -1456.17241f, 376.44883f, -1383.72917f, 553.88229f, -1259.84072f, 637.03794f, -1221.66672f,
			643.92441f, -1274.61214f, 647.54889f, -1413.21834f, 645.91457f, -1724.44556f, 421.98589f, -1692.50451f, 294.08721f, -1683.76609f, 256.57082f, -1664.38625f,
			168.11937f, -1562.92723f}));

	//santa maria beach
	InsertArea("Santa Maria Beach", "Lincoln St", Streamer::CreatePolygon(
		{	645.91457f, -1724.44556f, 421.98589f, -1692.50451f, 294.08721f, -1683.76609f, 256.57082f, -1664.38625f, 168.11937f, -1562.92723f,
			140.1531f, -1585.04009f, 72.41415f, -1557.90469f, 70.86031f, -2170.73438f, 645.91457f, -2169.93636f, 645.91457f, -1724.44556f}));
	
	/*
	//
	float points[] = {};
	InsertArea("", Streamer::CreatePolygon(points, ));
	*/
	
	sampgdk_logprintf("[AREA] Areas loaded.");
	sampgdk_logprintf("       %d areas have been loaded.", m_Areas.size());
}

CAreaHandler::~CAreaHandler()
{ 
	for(auto &a : m_Areas)
	{
		Streamer::DestroyArea(a.first);
		delete a.second;
	}
}


static class CInitAreaCallbacks
{
public:
	CInitAreaCallbacks()
	{
		MCore::Get()->AddCallback<void()>(CallbackType::GameModeInit, []() { CAreaHandler::Get()->Load(); });
		MCore::Get()->AddCallback<void()>(CallbackType::GameModeExit, []() { CAreaHandler::Destroy(); });
	}
} __InitAreaCallbacks;
